<!-- ƒê·ªãnh danh item 
    card bg-base-100 shadow-md mb-4: UI (Tailwind + DaisyUI)
	id="cart-item-{{ item.id }}": M·ªói item c√≥ ID duy nh·∫•t, D√πng cho hx-target
-->
<div class="card bg-base-100 shadow-md mb-4" id="cart-item-{{ item.id }}">
    <!-- B·ªë c·ª•c ngang: Tr√°i: ·∫£nh; Ph·∫£i: th√¥ng tin + form -->
    <div class="card-body">
        <div class="flex gap-4">
            <!-- Hi·ªÉn th·ªã ·∫£nh s√°ch -->
            {% if item.book.image %}
            <img src="{{ item.book.image.url }}" alt="{{ item.book.name }}" class="w-24 h-24 object-cover rounded"> {% else %}
            <div class="w-24 h-24 bg-base-200 flex items-center justify-center rounded">
                <span class="text-3xl">üìñ</span>
            </div>
            {% endif %}

            <!-- Th√¥ng tin s√°ch -->
            <div class="flex-1">
                <h3 class="text-xl font-bold">{{ item.book.name }}</h3> <!--T√™n s√°ch-->
                <p class="text-sm text-gray-500">{{ item.book.subject.name }} - {{ item.book.grade.name }}</p> <!--quan h·ªá kh√≥a ngo·∫°i-->
                <p class="text-lg font-bold text-primary mt-2">{{ item.book.price }}VNƒê</p> <!--Gi√° g·ªëc c·ªßa s√°ch-->

                <div class="flex gap-4 items-center mt-4">
                    <!-- form c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng -->
                    <form method="post" action="{% url 'update_cart_item' item.pk %}" hx-post="{% url 'update_cart_item' item.pk %}" hx-target="#cart-item-{{ item.id }}" hx-swap="outerHTML" class="flex gap-2 items-center">
                        {% csrf_token %} <!--Django b·∫£o m·∫≠t POST request-->
                        <label class="text-sm">S·ªë l∆∞·ª£ng:</label>
                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="input input-bordered input-sm w-20"> <!--S·ªë l∆∞·ª£ng hi·ªán t·∫°i-->
                        <button type="submit" class="btn btn-sm btn-primary">C·∫≠p nh·∫≠t</button>
                    </form>

                    <!-- form x√≥a : Backend tr·∫£ v·ªÅ HTML r·ªóng, HTMX thay th·∫ø item b·∫±ng r·ªóng ‚Üí bi·∫øn m·∫•t(kh√¥ng reload trang) -->
                    <form method="post" action="{% url 'remove_from_cart' item.pk %}" hx-post="{% url 'remove_from_cart' item.pk %}" hx-target="#cart-item-{{ item.id }}" hx-swap="outerHTML">
                        {% csrf_token %} <!--Django b·∫£o m·∫≠t POST request-->
                        <button type="submit" class="btn btn-sm btn-error btn-outline">X√≥a</button>
                    </form>
                </div>

                <p class="text-sm mt-2">T·ªïng: <span class="font-bold">{{ item.subtotal }} VNƒê</span></p> <!--Th√†nh ti·ªÅn-->
            </div>
        </div>
    </div>
</div>